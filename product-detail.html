<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Product Detail - Trendaura Store</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      background: linear-gradient(135deg,#f5f1e9,#f0e5ca);
      font-family: 'Poppins', sans-serif;
      color: #222;
      padding: 0;
    }
    header.header-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #fffbea;
      border-bottom: 2px solid #191919;
      padding: 13px 4vw;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    .store-name {
      font-family: 'Baloo 2', cursive;
      font-size: 1.38rem;
      font-weight: 700;
      color: #c49a2c;
      letter-spacing: 1.6px;
      text-align: center;
      user-select: none;
      white-space: nowrap;
      margin: 0;
      flex-grow: 1;
    }
    .cart-link {
      background: #dab609;
      color: #fff;
      font-weight: 700;
      text-decoration: none;
      padding: 9px 23px;
      border-radius: 22px;
      font-size: 1.05rem;
      transition: background 0.2s;
      box-shadow: 0 3px 9px #ecd48877;
      border: none;
      margin-left: 18px;
    }
    .cart-link:hover {
      background: #b07b00;
    }
    main.container {
      max-width: 940px;
      margin: 30px auto 40px auto;
      padding: 0 16px;
      display: flex;
      gap: 32px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.11);
      flex-wrap: wrap;
    }
    .left { flex: 1; min-width: 320px; display: flex; flex-direction: column; align-items: center; gap: 15px; }
    .main-image { width: 100%; border-radius: 12px; object-fit: contain; border: 2px solid #dab609; max-height: 440px;}
    .gallery { display: flex; gap: 12px; overflow-x: auto; padding-bottom: 5px; scrollbar-width: thin; scrollbar-color: #dab609 #eee; }
    .gallery::-webkit-scrollbar { height: 6px; }
    .gallery::-webkit-scrollbar-thumb { background-color: #dab609; border-radius: 3px; }
    .gallery img { height: 80px; width: 80px; object-fit: cover; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: border-color 0.3s ease; flex-shrink: 0;}
    .gallery img.active { border-color: #dab609;}
    .right { flex: 1; min-width: 320px; display: flex; flex-direction: column; gap: 18px; justify-content: flex-start;}
    h1 { font-weight: 700; font-size: 1.7rem; color: #191919; margin: 0;}
    .price-row { font-size: 1.28rem; font-weight: 700; color: #b8860b;}
    .price-old { text-decoration: line-through; color: #aaa; font-weight: 400; margin-left: 12px; font-size: 1.03rem;}
    .description { font-size: 1.07rem; color: #444; line-height: 1.54; margin-bottom: 8px;}
    label { font-family: 'Poppins',sans-serif; font-weight: 700; margin-bottom: 6px; color: #333; display: block;}
    .sizes { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom:12px;}
    .size-btn { padding: 10px 14px; border-radius: 7px; border: 2px solid #aaa; font-weight: 600; cursor: pointer; transition: background-color 0.2s, border-color 0.2s; user-select: none; background:#fffbea;}
    .size-btn.selected { background-color: #dab609; border-color: #b07b00; color: #191919;}
    .buttons { display: flex; gap: 20px; margin-bottom: 10px;}
    .btn { flex: 1; min-width: 140px; background-color: #dab609; border: none; padding: 16px 0; font-weight: 700; font-size: 1.1rem; border-radius: 30px; cursor: pointer; transition: background-color 0.3s ease; color: #191919; user-select: none;}
    .btn:hover { background-color: #b07b00;}
    .reviews { margin-top: 30px; border-top: 1px solid #ddd; padding-top: 20px; }
    .review { margin-bottom: 16px;}
    .review .user { font-weight: 700; color: #333;}
    .review .comment { margin-top: 4px; color: #555;}
    .similar-products { width: 100%; max-width:940px; margin: 30px auto; padding: 0 18px;}
    .similar-products h2 { font-family:'Poppins',sans-serif; font-weight: 700; font-size: 1.23rem; color: #191919; margin-bottom: 20px;}
    .sim-products-list { display: flex; gap: 22px; overflow-x: auto; scrollbar-width: thin; scrollbar-color: #dab609 #eee; padding-bottom: 13px;}
    .sim-products-list::-webkit-scrollbar { height: 6px;}
    .sim-products-list::-webkit-scrollbar-thumb { background-color: #dab609; border-radius: 3px;}
    .sim-product-card { flex: 0 0 180px; background: white; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.15); cursor: pointer; overflow: hidden; display: flex; flex-direction: column; align-items: center; transition: box-shadow 0.2s;}
    .sim-product-card:hover { box-shadow: 0 4px 14px rgba(0,0,0,0.3);}
    .sim-product-card img { width: 100%; height: 160px; object-fit: cover; border-radius: 12px 12px 0 0;}
    .sim-product-name { margin: 8px 6px; font-weight: 600; font-size: 1rem; text-align: center; color: #222;}
    .sim-product-price { margin-bottom: 8px; font-weight: 700; color: #b8860b;}
    @media(max-width: 768px){
      main.container{flex-direction:column;padding:10px;}
      .left, .right{min-width:100%;}
      .sim-products-list{flex-wrap:nowrap;}
      .store-name{font-size:1.14rem;}
      .cart-link{font-size:0.99rem;}
      header.header-bar{padding:12px 8px;}
    }
  </style>
</head>
<body>
  <header class="header-bar">
    <span class="store-name">Trendaura Store</span>
    <a class="cart-link" href="cart.html">Cart</a>
  </header>
  <main class="container">
    <div class="left">
      <img id="main-product-image" class="main-image" src="" alt="Main Product Image" />
      <div class="gallery" id="image-gallery"></div>
    </div>
    <div class="right">
      <h1 id="product-name"></h1>
      <div class="price-row">
        <span id="product-price"></span>
        <span id="price-old" class="price-old"></span>
      </div>
      <p class="description" id="product-description"></p>
      <label>Choose Size:</label>
      <div class="sizes" id="size-buttons"></div>
      <div class="buttons">
        <button id="add-to-cart-btn" class="btn">Add to Bag</button>
        <button id="buy-now-btn" class="btn">Buy Now</button>
      </div>
      <div class="reviews" id="reviews-section"></div>
    </div>
  </main>
  <div class="similar-products">
    <h2>Similar Products</h2>
    <div class="sim-products-list" id="similar-products-list"></div>
  </div>
<script src="products.js"></script>
<script>
  const productId = new URLSearchParams(window.location.search).get('id');
  const product = products.find(p => p.id === productId);
  if (!product) {
    document.body.innerHTML = '<h2>Product not found.</h2>';
    throw new Error('Product not found');
  }
  const mainImg = document.getElementById('main-product-image');
  const gallery = document.getElementById('image-gallery');
  const nameElem = document.getElementById('product-name');
  const descElem = document.getElementById('product-description');
  const priceElem = document.getElementById('product-price');
  const priceOldElem = document.getElementById('price-old');
  const sizeButtonsContainer = document.getElementById('size-buttons');
  const addToCartBtn = document.getElementById('add-to-cart-btn');
  const buyNowBtn = document.getElementById('buy-now-btn');
  const reviewsSection = document.getElementById('reviews-section');
  const similarProductsList = document.getElementById('similar-products-list');
  nameElem.textContent = product.name;
  descElem.textContent = product.description;
  priceElem.textContent = product.price;
  priceOldElem.textContent = product.priceOld || '';
  mainImg.src = product.mainImage;
  mainImg.alt = product.name;
  gallery.innerHTML = '';
  product.images.forEach((src, idx) => {
    const img = document.createElement('img');
    img.src = src;
    img.alt = product.name + ' image ' + (idx + 1);
    if (idx === 0) img.classList.add('active');
    img.onclick = () => {
      mainImg.src = src;
      Array.from(gallery.children).forEach(e => e.classList.remove('active'));
      img.classList.add('active');
    };
    gallery.appendChild(img);
  });
  sizeButtonsContainer.innerHTML = '';
  product.sizes.forEach(size => {
    const btn = document.createElement('button');
    btn.textContent = size;
    btn.className = 'size-btn';
    btn.onclick = () => {
      Array.from(sizeButtonsContainer.children).forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
    };
    sizeButtonsContainer.appendChild(btn);
  });
  function renderReviews(reviews) {
    if (!reviews || reviews.length === 0) {
      reviewsSection.innerHTML = '<p>No reviews yet.</p>';
      return;
    }
    reviewsSection.innerHTML = '';
    reviews.forEach(r => {
      const div = document.createElement('div');
      div.className = 'review';
      div.innerHTML = `<div class="user">${r.user} ‚≠ê${r.rating}</div><div class="comment">${r.comment}</div>`;
      reviewsSection.appendChild(div);
    });
  }
  renderReviews(product.reviews);
  const similar = products.filter(p => p.category === product.category && p.id !== product.id);
  similarProductsList.innerHTML = '';
  similar.forEach(p => {
    const card = document.createElement('div');
    card.className = 'sim-product-card';
    card.innerHTML = `<img src="${p.mainImage}" alt="${p.name}" /><div class="sim-product-name">${p.name}</div><div class="sim-product-price">${p.price}</div>`;
    card.onclick = () => {
      window.location.href = `product-detail.html?id=${p.id}`;
    };
    similarProductsList.appendChild(card);
  });
function addToCart(product, size) {
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  const found = cart.find(item => item.id === product.id && item.size === size);
  if (found) {
    found.qty = (found.qty || 1) + 1;
  } else {
    cart.push({ id: product.id, size: size, qty: 1, ...product });
  }
  localStorage.setItem('cart', JSON.stringify(cart));
  updateCartCount(); // call this here to update count immediately
}
 function buyNow(product, size) {
  addToCart(product, size);
  window.location.href = "checkout.html"; // Yeh checkout page par redirect karega
}
addToCartBtn.onclick = () => {
  const selectedSizeBtn = sizeButtonsContainer.querySelector('.selected');
  if (!selectedSizeBtn) {
    alert('Please select a size before adding to bag.');
    return;
  }
  const selectedSize = selectedSizeBtn.textContent;
  addToCart(product, selectedSize);
  alert('Item added to bag!');
};
buyNowBtn.onclick = () => {
  const selectedSizeBtn = sizeButtonsContainer.querySelector('.selected');
  if (!selectedSizeBtn) {
    alert('Please select a size before buying.');
    return;
  }
  const selectedSize = selectedSizeBtn.textContent;
  const buyNowItem = { id: product.id, size: selectedSize, qty: 1, ...product };
  localStorage.setItem('buyNowItem', JSON.stringify(buyNowItem));
  localStorage.setItem('isBuyNow', 'true');
  window.location.href = "checkout.html";
};

</script>
</body>
</html>
